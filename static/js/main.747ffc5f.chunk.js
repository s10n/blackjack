(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,n,t){e.exports={card:"Card_card__2SUn6",back:"Card_back__4pROr"}},17:function(e,n,t){e.exports={button:"Button_button__3pS3v"}},18:function(e,n,t){e.exports={hand:"Hand_hand__E2kMN"}},21:function(e,n,t){e.exports=t(38)},31:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"startGame",function(){return P}),t.d(r,"resetGame",function(){return I}),t.d(r,"bet",function(){return L}),t.d(r,"win",function(){return U}),t.d(r,"draw",function(){return J}),t.d(r,"set",function(){return G}),t.d(r,"double",function(){return H}),t.d(r,"split",function(){return T});var a=t(0),c=t.n(a),o=t(13),i=t.n(o),l=t(2),u=t(1),s=t(16),d=t(4),f=["A","2","3","4","5","6","7","8","9","10","J","Q","K"].reduce(function(e,n){return Object(d.a)(e).concat(Object(d.a)(Array.from({length:4},function(e){return n})))},[]),y=function(){return function(e){for(var n,t,r=e.length;r;)t=Math.floor(Math.random()*r--),n=e[r],e[r]=e[t],e[t]=n;return e}(f)},p=function(e,n){return function(t,r){return r.player===n||void 0===t?e(t,r):t}},h=Object(u.c)({hand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"draw":case"hand":return n.hand;case"reset":return[];default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"stay":case"bust":case"blackjack":case"surrender":return n.type;case"reset":return"";default:return e}},stake:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"bet":return e+n.stake;case"reset":return 0;default:return e}}}),v=Object(u.c)({dealer:p(h,"dealer"),primary:p(h,"primary"),replica:p(h,"replica")}),b=Object(u.c)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"idle";switch((arguments.length>1?arguments[1]:void 0).type){case"start":return"playing";case"reset":return"idle";default:return e}}}),m=Object(u.c)({deck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();switch((arguments.length>1?arguments[1]:void 0).type){case"reset":return y();case"draw":return e.slice(1);default:return e}},players:v,coins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"bet":return e-n.stake;case"win":return e+n.amount;default:return e}},game:b}),g=function(){try{var e=localStorage.getItem("state");return JSON.parse(e)||void 0}catch(n){return}}(),k=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d)(Object(u.a)(s.a)),w=Object(u.e)(m,g,k);w.subscribe(function(){return function(e){try{var n=JSON.stringify(e);localStorage.setItem("state",n)}catch(t){}}(w.getState())});var E=w,O=(t(31),function(e){return Number(e)||"A"===e&&1||10}),j=function(e){var n=e.reduce(function(e,n){return e+O(n)},0);return e.includes("A")&&n+10<=21?[n,n+10]:[n]},_=function(e,n){var t=e.dealer,r=e[n],a={blackjack:![1,10].includes(O(t.hand[0]))&&"BLACKJACK",bust:"LOSE",surrender:"SURRENDER"},c={blackjack:"blackjack"===r.status?"DRAW":"LOSE",bust:"WIN"};return a[r.status]||c[t.status]||("stay"===t.status?function(){var e=Math.max.apply(Math,Object(d.a)(j(r.hand))),n=Math.max.apply(Math,Object(d.a)(j(t.hand)));return e>n?"WIN":n>e?"LOSE":"DRAW"}():"")},C={BLACKJACK:2.5,WIN:2,DRAW:1,SURRENDER:.5,LOSE:0},S=function(e,n){var t=_(e,n);return e[n].stake*(C[t]||0)},x=_,N=function(e){var n=e.hand,t=e.status;return 2===n.length&&!t},K=function(e){return!e.status},A=function(e){var n=e.player,t=e.coins;return N(n)&&t>=n.stake},B=function(e){return N(e)},D=function(e){var n=e.players,t=e.coins,r=n.primary,a=!!n.replica.hand.length;return N(r)&&t>=r.stake&&r.hand[0]===r.hand[1]&&!a},W=function(e){var n=e.dealer,t=e.primary,r=e.replica,a=n.status,c=n.hand;return!a&&j(c).every(function(e){return e<=16})&&[t,r].filter(function(e){return e.hand.length}).every(function(e){return e.status})},R=function(e){var n=e.dealer;return!n.status&&j(n.hand).some(function(e){return e>=17})},M=function(e){return["primary","replica"].filter(function(n){return e[n].hand.length}).every(function(n){return x(e,n)})},P=function(){return function(e,n){var t=n().players;e({type:"start"}),Array.from({length:2-t.primary.hand.length}).forEach(function(){return e(J("primary"))}),!t.dealer.hand.length&&e(J("dealer"))}},I=function(){return function(e,n){e({type:"reset",player:"dealer"}),e({type:"reset",player:"primary"}),e({type:"reset",player:"replica"})}},L=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return function(t,r){r().coins>=n&&t({type:"bet",player:e,stake:n})}},U=function(e){return function(n,t){var r=t().players;n({type:"win",amount:e||function(e){return["primary","replica"].reduce(function(n,t){return n+S(e,t)},0)}(r)})}},J=function(e){return function(n,t){var r=t(),a=r.deck,c=r.players[e],o=a[0],i=Object(d.a)(c.hand).concat([o]);n({type:"draw",player:e,hand:i}),n(F(e))}},G=function(e,n){return function(t,r){t({type:n,player:e})}},H=function(e){return function(n,t){var r=t().players;n(L(e,r[e].stake)),n(G(e,"stay")),n(J(e))}},T=function(){return function(e,n){var t=n().players.primary,r=t.hand,a=t.stake,c=r[0];e({type:"hand",player:"primary",hand:[c]}),e({type:"hand",player:"replica",hand:[c]}),e({type:"bet",player:"replica",stake:a})}},F=function(e){return function(n,t){var r=function(e,n){var t=e[n].hand,r=j(t),a=r.some(function(e){return 21===e}),c=r.every(function(e){return e>21}),o=a&&2===t.length,i="dealer"===n&&R(e);return a?o?"blackjack":"stay":c?"bust":i?"stay":""}(t().players,e);r&&n(G(e,r))}},X=t(5),z=t(17),Q=t.n(z),V=function(e){var n=e.color,t=e.children,r=Object(X.a)(e,["color","children"]);return c.a.createElement("button",Object.assign({className:Q.a.button,style:{backgroundColor:r.disabled?"silver":n}},r),t)},Y=t(7),$=t.n(Y),q=function(e){var n=e.title,t=e.children,r=e.onClick;return c.a.createElement("div",{className:$.a.box,onClick:r},n&&c.a.createElement("h1",{className:$.a.title},n),c.a.createElement("p",{className:$.a.content},t))},Z=Object(l.b)(function(e){var n=e.coins,t=e.players;return{coins:n,canWithdraw:"idle"===e.game.status&&n+t.primary.stake<5}},function(e){return Object(u.b)(r,e)},function(e,n){var t=e.coins,r=e.canWithdraw,a=n.win;return{coins:t,withdraw:r?function(){return a(100)}:void 0}})(function(e){var n=e.coins,t=e.withdraw;return c.a.createElement(q,{onClick:t},String(n))}),ee=t(20),ne=t(8),te=t.n(ne),re=t(18),ae=t.n(re),ce=t(11),oe=t.n(ce),ie=t(19),le=t.n(ie),ue=function(e){var n=e.back,t=e.children,r=e.style,a=void 0===r?{}:r,o=e.onClick;return c.a.createElement("div",{className:le()(oe.a.card,n&&oe.a.back),style:a,onClick:o},t)},se=Object(l.b)(function(e,n){var t=e.players,r=n.playerKey;return{hand:t[r].hand,canDraw:"dealer"===r&&!M(t)&&W(t)}},function(e){return Object(u.b)(r,e)},function(e,n,t){var r=e.hand,a=e.canDraw,c=n.draw,o=t.playerKey;return Object.assign({hand:r},a&&{onClick:function(){return c(o)}})})(function(e){var n=e.hand,t=e.onClick;return c.a.createElement("ul",{className:ae.a.hand,style:{cursor:t&&"pointer"},onClick:t},n.map(function(e,n){return c.a.createElement(ue,{key:n},e)}),t&&c.a.createElement(ue,{back:!0},"+"))}),de=Object(l.b)(function(e,n){var t=e.players,r=n.playerKey;return{result:x(t,r),color:S(t,r)?"green":"red"}})(function(e){var n=e.result,t=e.color;return n?c.a.createElement("p",{style:{color:t,fontSize:"200%",fontWeight:"bold"}},n):null}),fe=Object(l.b)(function(e,n){var t=e.players,r=e.game,a=e.coins,c=n.playerKey,o=t[c],i="replica"!==c||!!t.primary.status;return{players:t,game:r,stake:o.stake,canBet:a>=5,canBet10:a>=10,canMinus:o.stake>5,canPlay:!!o.stake,canDraw:i&&K(o),canDouble:i&&A({player:o,coins:a}),canSplit:i&&D({players:t,coins:a}),canSurrender:i&&!t.replica.hand.length&&B(o)}},function(e){return Object(u.b)(r,e)})(function(e){e.players;var n=e.game,t=e.playerKey,r=(e.stake,Object(X.a)(e,["players","game","playerKey","stake"])),a=r.canBet,o=r.canBet10,i=r.canMinus,l=r.canPlay,u=r.canDraw,s=r.canDouble,d=r.canSurrender,f={idle:[{color:"green",children:"++",disabled:!o,onClick:function(){return r.bet(t,10)}},{color:"green",children:"+",disabled:!a,onClick:function(){return r.bet(t,5)}},{color:"brown",children:"-",disabled:!i,onClick:function(){return r.bet(t,-5)}},{color:"navy",children:"\u2192",disabled:!l,onClick:function(){return r.startGame()}}],playing:[{color:"green",children:"H",disabled:!u,onClick:function(){return r.draw(t)}},{color:"brown",children:"S",disabled:!u,onClick:function(){return r.set(t,"stay")}},s&&{color:"navy",children:"D",onClick:function(){return r.double(t)}},r.canSplit&&{color:"olive",children:"SP",onClick:function(){return r.split()}},d&&{color:"teal",children:"SU",onClick:function(){return r.set(t,"surrender")}}].filter(Boolean)}[n.status]||[];return c.a.createElement("section",null,f.map(function(e,n){return c.a.createElement(V,Object.assign({},e,{key:n}))}))}),ye=Object(l.b)(function(e,n){var t=e.players,r=n.playerKey,a=t[r],c="dealer"===r;return Object(ee.a)({},a,{totals:j(a.hand),isDealer:c})})(function(e){var n=e.playerKey,t=e.stake,r=e.totals,a=e.status,o=e.isDealer;return c.a.createElement("div",{className:te.a.container},c.a.createElement("p",{className:te.a.status,style:{order:o&&2}},a),c.a.createElement("section",{className:te.a.totals,style:{order:o&&1}},r.filter(Boolean).join(", ")),c.a.createElement(se,{playerKey:n}),!o&&c.a.createElement(c.a.Fragment,null,c.a.createElement(q,null,t),c.a.createElement(de,{playerKey:n}),c.a.createElement(fe,{playerKey:n})))}),pe={display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",height:"100%",maxHeight:800,maxWidth:540,marginLeft:"auto",marginRight:"auto",padding:15,lineHeight:1.6,textAlign:"center",players:{display:"flex",justifyContent:"space-around",alignItems:"flex-end",alignSelf:"stretch"}},he=Object(l.b)(function(e){var n=e.players;return{showFinishButton:"playing"===e.game.status&&M(n),playersKeys:[n.replica.hand.length&&"replica","primary"].filter(Boolean)}},function(e){return Object(u.b)(r,e)})(function(e){var n=e.playersKeys,t=e.showFinishButton,r=e.win,a=e.resetGame;return c.a.createElement("main",{style:pe},c.a.createElement(ye,{playerKey:"dealer"}),c.a.createElement("div",{style:n.length>1?pe.players:{}},n.map(function(e){return c.a.createElement(ye,{playerKey:e,key:e})})),t&&c.a.createElement(V,{color:"navy",onClick:function(){r(),a()}},"\u2714\ufe0e"),c.a.createElement(Z,null))}),ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(e,n){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(c.a.createElement(l.a,{store:E},c.a.createElement(he,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/blackjack",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var n="".concat("/blackjack","/service-worker.js");ve?(function(e,n){fetch(e).then(function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):be(e,n)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(n,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):be(n,e)})}}()},7:function(e,n,t){e.exports={box:"Box_box__1BfmP",title:"Box_title__2gOYC",content:"Box_content__3UwtR"}},8:function(e,n,t){e.exports={container:"Player_container__1MsP_",totals:"Player_totals__1yIEe",status:"Player_status__1e9rt"}}},[[21,2,1]]]);
//# sourceMappingURL=main.747ffc5f.chunk.js.map