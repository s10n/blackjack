(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,n,t){e.exports={card:"Card_card__ySpGb",back:"Card_back__3Nhc0"}},20:function(e,n,t){e.exports={button:"Button_button__j85vl"}},24:function(e,n,t){e.exports=t(39)},34:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r={};t.r(r),t.d(r,"initGame",function(){return H}),t.d(r,"resetGame",function(){return U}),t.d(r,"startGame",function(){return J}),t.d(r,"stopGame",function(){return R}),t.d(r,"draw",function(){return I}),t.d(r,"split",function(){return L}),t.d(r,"setStatus",function(){return W}),t.d(r,"bet",function(){return X});var a=t(0),c=t.n(a),i=t(12),u=t.n(i),o=t(3),l=t(1),s=t(15),d=t(4),p=["A","2","3","4","5","6","7","8","9","10","J","Q","K"].reduce(function(e,n){return Object(d.a)(e).concat(Object(d.a)(Array.from({length:4},function(e){return n})))},[]),f=function(){return function(e){for(var n,t,r=e.length;r;)t=Math.floor(Math.random()*r--),n=e[r],e[r]=e[t],e[t]=n;return e}(p)},y=function(e,n){return function(t,r){return r.player===n||void 0===t?e(t,r):t}},h=Object(l.c)({hand:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"draw":case"hand":return n.hand;case"reset":return[];default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"draw":return n.status||e;case"stay":case"surrender":return n.type;case"reset":return"";default:return e}},stake:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"bet":return e+n.stake;case"reset":return 0;default:return e}}}),m=Object(l.c)({dealer:y(h,"dealer"),primary:y(h,"primary"),replica:y(h,"replica")}),b=Object(l.c)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"idle";switch((arguments.length>1?arguments[1]:void 0).type){case"start":return"playing";case"stop":return"stop";case"reset":return"idle";default:return e}}}),v=Object(l.c)({deck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f();switch((arguments.length>1?arguments[1]:void 0).type){case"reset":return f();case"draw":return e.slice(1);default:return e}},players:m,coins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"bet":return e-n.stake;case"win":return e+n.amount;default:return e}},game:b}),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,g=Object(l.e)(v,{players:{dealer:{hand:[]},primary:{hand:[]}}},k(Object(l.a)(s.a))),w=(t(34),t(23)),j=t(16),O=t(17),E=t(21),_=t(18),C=t(22),S=function(e){return Number(e)||"A"===e&&1||10},N=function(e){var n=e.reduce(function(e,n){return e+S(n)},0);return e.includes("A")&&n+10<=21?[n,n+10]:[n]},D=function(e){var n=N(e).every(function(e){return e>21});return function(e){return 2===e.length&&N(e).some(function(e){return 21===e})}(e)?"blackjack":n?"bust":""},G=function(e){var n=e.player,t=e.dealer,r=2,a=1,c=0,i=N(n.hand),u=D(n.hand),o=N(t.hand),l=D(t.hand),s={blackjack:[1,10].includes(S(t.hand[0]))&&2.5,bust:c},p={blackjack:c,bust:r};return Number.isFinite(s[u])?s[u]:Number.isFinite(p[l])?p[l]:"stay"===t.status?function(){var e=Math.max.apply(Math,Object(d.a)(i)),n=Math.max.apply(Math,Object(d.a)(o));return e>n?r:n<e?a:c}():"surrender"===n.status?.5:NaN},K=function(e){var n=e.hand,t=e.status;return!D(n)&&!t},x=function(e){var n=e.hand,t=e.status;return 2===n.length&&!t},A=function(e){var n=e.hand;return N(n).some(function(e){return 21===e})},M=function(e){var n=e.primary,t=e.replica,r=n.hand,a=n.status,c=!!t.hand.length;return 2===r.length&&r[0]===r[1]&&!a&&!c},F=function(e){var n=e.dealer;return[e.primary,e.replica].filter(function(e){return e.hand.length}).every(function(e){return"stay"===e.status})&&N(n.hand).every(function(e){return e<=16})&&"stay"!==n.status},B=function(e){var n=e.dealer;e.primary,e.replica;return N(n.hand).some(function(e){return e>=17})},T=function(e){var n=e.dealer;return[e.primary,e.replica].filter(function(e){return e.hand.length}).every(function(e){return Number.isFinite(G({player:e,dealer:n}))})},H=function(){return X("primary")},U=function(){return function(e,n){var t=n().players,r=t.dealer,a=[t.primary,t.replica].reduce(function(e,n){return e+function(e){return e.stake*G({player:e,dealer:r})}(n)},0);e({type:"reset",player:"dealer"}),e({type:"reset",player:"primary"}),e({type:"reset",player:"replica"}),e({type:"win",amount:a}),e(X("primary"))}},J=function(){return function(e,n){var t=n().players;e({type:"start"}),Array.from({length:2-t.primary.hand.length}).forEach(function(){return e(I("primary"))}),!t.dealer.hand.length&&e(I("dealer"))}},R=function(){return function(e,n){e({type:"stop"})}},I=function(e){return function(n,t){var r=t(),a=r.deck,c=r.players[e],i=a[0],u=Object(d.a)(c.hand).concat([i]);n({type:"draw",player:e,hand:u}),n(P(e))}},L=function(){return function(e,n){var t=n().players.primary,r=t.hand,a=t.stake,c=r[0];e({type:"hand",player:"primary",hand:[c]}),e({type:"hand",player:"replica",hand:[c]}),e({type:"bet",player:"replica",stake:a})}},P=function(e){return function(n,t){var r=t().players;("dealer"===e?B(r):A(r[e]))&&n(W(e,"stay"))}},W=function(e,n){return function(t){t({type:n,player:e})}},X=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return function(t,r){var a=r(),c=a.players,i=a.coins,u=(c[e].stake||0)+n;i>=n&&u>=5&&t({type:"bet",player:e,stake:n})}},Q=Object(o.b)(function(e){return{coins:e.coins}})(function(e){var n=e.coins;return c.a.createElement("p",{style:{textAlign:"center"}},n,"\ub9cc\uc6d0")}),V=t(7),$=t.n(V),q=t(10),z=t.n(q),Y=t(19),Z=t.n(Y),ee=function(e){var n=e.back,t=e.children,r=e.style,a=void 0===r?{}:r,i=e.onClick;return c.a.createElement("div",{className:Z()(z.a.card,n&&z.a.back),style:a,onClick:i},t)},ne=t(5),te=t(20),re=t.n(te),ae=function(e){var n=e.color,t=e.children,r=Object(ne.a)(e,["color","children"]);return c.a.createElement("button",Object.assign({className:re.a.button,style:{backgroundColor:r.disabled?"silver":n}},r),t)},ce=Object(o.b)(function(e,n){var t=e.players,r=e.game,a=t[n.playerKey];return{game:r,stake:a.stake,canDraw:K(a),canSplit:M(t),canSurrender:!t.replica.hand.length&&x(a)}},function(e){return Object(l.b)(r,e)})(function(e){var n=e.game,t=e.playerKey,r=e.stake,a=Object(ne.a)(e,["game","playerKey","stake"]),i=function(){return a.draw(t)},u=function(){return a.setStatus(t,"stay")},o=a.canDraw,l=a.canSurrender,s=a.canSplit,d={idle:[{color:"green",children:"+",onClick:function(){return a.bet(t,5)}},{color:"brown",children:"-",onClick:function(){return a.bet(t,-5)}},{color:"navy",children:"\u2192",onClick:function(){return a.startGame()}}],playing:[{color:"green",children:"H",disabled:!o,onClick:i},{color:"brown",children:"S",disabled:!o,onClick:u},{color:"navy",children:"D",disabled:!o,onClick:function(){a.bet(t,r),i(),u()}},s&&{color:"olive",children:"SP",onClick:function(){return a.split()}},{color:"teal",children:"SU",disabled:!l,onClick:function(){return a.setStatus(t,"surrender")}}].filter(Boolean),stop:[{color:"navy",children:"\u2714\ufe0e",onClick:function(){return a.resetGame()}}]}[n.status];return c.a.createElement("section",null,d.map(function(e,n){return c.a.createElement(ae,Object.assign({},e,{key:n}))}))}),ie=Object(o.b)(function(e,n){var t=e.players,r=n.playerKey,a=t[r],c=t.dealer,i=a.hand;return{hand:i,stake:a.stake,totals:N(i),result:D(i),gameResult:G({player:a,dealer:c}),isDealer:"dealer"===r}})(function(e){var n=e.playerKey,t=e.hand,r=e.stake,a=e.totals,i=e.result,u=e.isDealer,o=e.gameResult;return c.a.createElement("div",{className:$.a.container},c.a.createElement("p",{style:{order:u&&2}},i),c.a.createElement("section",{className:$.a.totals,style:{order:u&&1}},a.filter(Boolean).join(", ")),c.a.createElement("ul",{className:$.a.deck},t.map(function(e,n){return c.a.createElement(ee,{key:n},e)})),!u&&c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,r,"\ub9cc\uc6d0"),Number.isFinite(o)&&c.a.createElement("p",null,String(o)),c.a.createElement(ce,{playerKey:n})))}),ue=function(e){function n(){var e,t;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=Object(E.a)(this,(e=Object(_.a)(n)).call.apply(e,[this].concat(a)))).watch=function(){var e=t.props,n=e.isDealerTurn,r=e.draw,a=e.hasGameFinished,c=e.stopGame;n&&setTimeout(function(){return r("dealer")},500),a&&c()},t}return Object(C.a)(n,e),Object(O.a)(n,[{key:"componentDidMount",value:function(){this.props.initGame()}},{key:"componentDidUpdate",value:function(){"playing"===this.props.status&&this.watch()}},{key:"render",value:function(){var e=this.props.playersKeys;return c.a.createElement("main",{style:oe},e.map(function(e){return c.a.createElement(ie,{playerKey:e,key:e})}),c.a.createElement(Q,null))}}]),n}(a.Component),oe={height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:15},le=Object(o.b)(function(e){var n=e.players,t=e.game,r=Object.keys(n).filter(function(e){return"replica"!==e||n[e].hand.length});return Object(w.a)({},t,{playersKeys:r,isDealerTurn:F(n),hasGameFinished:T(n)})},function(e){return Object(l.b)(r,e)})(ue);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(o.a,{store:g},c.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,n,t){e.exports={container:"Hand_container__2U2je",deck:"Hand_deck__1AbL5",totals:"Hand_totals__2lwSK"}}},[[24,2,1]]]);
//# sourceMappingURL=main.3b6614a7.chunk.js.map